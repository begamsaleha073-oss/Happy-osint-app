<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<title>âš¡ CYBER PHONE & VEHICLE INFO LOOKUP âš¡</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
:root{
  --neon:#00fff2;
  --accent:#00ffaa;
  --bg:#010101;
}
body{
  margin:0;
  font-family:'Share Tech Mono',monospace;
  background:radial-gradient(circle at center,#0a0a0a 0%,#000 80%);
  color:var(--neon);
  min-height:100vh;
  -webkit-tap-highlight-color:transparent;
}
.container{
  max-width:920px;
  margin:20px auto;
  background:rgba(10,10,15,0.95);
  border:2px solid var(--neon);
  border-radius:16px;
  padding:20px 16px;
  text-align:center;
  box-shadow:0 0 20px #00fff255;
}
.header h1{
  font-size:1.5rem;
  color:var(--neon);
  text-shadow:0 0 20px var(--neon);
}
.header p{color:#aaffff;margin-top:4px;font-size:0.9rem;}
.selector{
  display:flex;
  gap:10px;
  justify-content:center;
  margin:12px 0;
  flex-wrap:wrap;
}
.option-btn{
  flex:1;
  min-width:120px;
  padding:10px;
  border-radius:10px;
  border:1px solid var(--neon);
  background:rgba(0,10,10,0.85);
  color:var(--neon);
  cursor:pointer;
  font-size:0.9rem;
}
.option-btn.active{background:var(--neon);color:#000;}
.controls{display:flex;flex-direction:column;align-items:center;gap:12px;}
input{
  width:90%;
  max-width:360px;
  padding:12px;
  border-radius:10px;
  border:2px solid var(--neon);
  background:rgba(0,25,25,0.9);
  color:var(--neon);
  text-align:center;
  font-size:15px;
  outline:none;
}
.btn{
  padding:12px 22px;
  background:linear-gradient(90deg,var(--neon),var(--accent));
  color:#000;
  font-size:0.9rem;
  font-weight:bold;
  border:none;
  border-radius:10px;
  cursor:pointer;
  letter-spacing:1px;
  width:fit-content;
  min-width:120px;
}
.btn[disabled]{opacity:0.6;cursor:not-allowed;}
.terminal{
  max-width:95%;
  margin:16px auto;
  border:1px solid #00ffcc;
  border-radius:10px;
  background:#000;
  padding:10px;
  color:#7CFC00;
  white-space:pre-wrap;
  overflow:auto;
  min-height:220px;
  font-size:0.8rem;
}
.cursor{
  display:inline-block;
  width:6px;
  height:12px;
  background:#7CFC00;
  animation:blink 1s step-end infinite;
  vertical-align:bottom;
}
@keyframes blink{50%{opacity:0}}
.notification{
  position:fixed;
  bottom:14px;
  right:14px;
  background:#00ffcc;
  color:#000;
  padding:8px 12px;
  border-radius:6px;
  display:none;
  font-size:0.85rem;
}
.notification.error{background:#ff0044;color:#fff;}
.small{text-align:center;font-size:0.8rem;color:#cfe;margin-top:10px;line-height:1.3;}
a.link{color:var(--neon);text-decoration:none;}
#vehicleFrameContainer{position:fixed;top:0;left:0;width:100%;height:100%;background:#000;display:none;z-index:1000;}
#vehicleFrame{width:100%;height:100%;border:none;}
#backBtn{position:fixed;bottom:16px;left:50%;transform:translateX(-50%);background:var(--neon);color:#000;padding:10px 16px;border:none;border-radius:8px;z-index:1001;font-size:0.9rem;}
.modal{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;z-index:999;padding:16px;}
.card{background:#071016;padding:16px;border-radius:12px;border:2px solid var(--neon);width:100%;max-width:360px;color:var(--neon);text-align:center;}
.card h3{margin-top:0;font-size:1.2rem;}
.field{width:100%;padding:10px;border-radius:8px;border:1px solid #0b5560;background:rgba(0,0,0,0.3);color:var(--neon);margin-bottom:10px;font-size:0.9rem;}
.footer-note{font-size:0.8rem;color:#aaa;margin-top:10px;text-align:center;}
.key-mobile,.val-mobile{color:#00fff2;}
.key-name,.val-name{color:#ff66ff;}
.key-fname,.val-fname{color:#00ff88;}
.key-address,.val-address{color:#ffaa00;}
.key-circle,.val-circle{color:#ff3333;}
.key-alt,.val-alt{color:#66ccff;}
.key-id,.val-id{color:#ffcc00;}
.key-dev,.val-dev{color:#ff00aa;}
.left{display:inline-block;min-width:100px;text-align:left;}
.right{display:inline-block;margin-left:4px;}
@media(max-width:480px){
  .header h1{font-size:1.2rem;}
  input{font-size:0.9rem;}
  .btn{font-size:0.85rem;padding:10px 18px;}
  .option-btn{font-size:0.85rem;}
  .terminal{font-size:0.75rem;}
  .card h3{font-size:1rem;}
}
</style>
</head>
<body>
<div class="container" id="mainContainer">
  <div class="header">
    <h1>âš¡ CYBER PHONE & VEHICLE LOOKUP âš¡</h1>
    <p>Trace phone & vehicle info securely</p>
  </div>

  <div class="controls">
    <div class="selector">
      <div class="option-btn active" id="phoneBtn">ðŸ“± Phone</div>
      <div class="option-btn" id="vehicleBtn">ðŸš— Vehicle</div>
    </div>
    <input id="lookupInput" placeholder="Enter 10-digit number" maxlength="10"/>
    <button class="btn" id="lookupBtn">Lookup</button>

    <div style="display:flex;gap:10px;margin-top:10px;flex-wrap:wrap;justify-content:center;">
      <button class="btn" id="openLogin">Login</button>
      <button class="btn" id="openSignup">Signup</button>
    </div>

    <div class="footer-note">
      Admin panel: <a href="/admin" class="link">/admin</a>
    </div>
  </div>
</div>

<div class="terminal" id="terminal">
  <div id="terminalText">kali@osint:~$ awaiting input...</div><span class="cursor"></span>
</div>

<div class="small">âš  Educational use only â€” Contact: <a href="https://t.me/Royal_smart_boy" class="link">@Royal_smart_boy</a></div>
<div class="notification" id="notification"></div>

<div id="vehicleFrameContainer">
  <iframe id="vehicleFrame"></iframe>
  <button id="backBtn">â¬… Back</button>
</div>

<div class="modal" id="signupModal">
  <div class="card">
    <h3>Signup â€” Request Approval</h3>
    <input id="suUsername" class="field" placeholder="Username">
    <input id="suPassword" class="field" type="password" placeholder="Password">
    <input id="suTG" class="field" placeholder="Telegram ID (chat id)">
    <button class="btn" id="sendSignup">Send</button>
    <button class="btn" id="closeSignup" style="margin-left:8px;">Close</button>
    <p class="small">Admin approval needed. Free 10 searches on approval.</p>
  </div>
</div>

<div class="modal" id="loginModal">
  <div class="card">
    <h3>Login</h3>
    <input id="liUsername" class="field" placeholder="Username">
    <input id="liPassword" class="field" type="password" placeholder="Password">
    <button class="btn" id="doLogin">Login</button>
    <button class="btn" id="closeLogin" style="margin-left:8px;">Close</button>
  </div>
</div>

<div class="modal" id="subModal">
  <div class="card">
    <h3>Subscription Needed</h3>
    <p class="small">Your free searches are over or plan expired. Send subscription request to admin.</p>
    <button class="btn" id="sendSubReq">Send Request</button>
    <button class="btn" id="closeSub" style="margin-left:8px;">Close</button>
  </div>
</div>

<script>
const API_BASE="/api";
const phoneBtn=document.getElementById("phoneBtn");
const vehicleBtn=document.getElementById("vehicleBtn");
const lookupInput=document.getElementById("lookupInput");
const lookupBtn=document.getElementById("lookupBtn");
const terminalText=document.getElementById("terminalText");
const notif=document.getElementById("notification");
const signupModal=document.getElementById("signupModal");
const loginModal=document.getElementById("loginModal");
const subModal=document.getElementById("subModal");
const vehicleFrameContainer=document.getElementById("vehicleFrameContainer");
const vehicleFrame=document.getElementById("vehicleFrame");
const backBtn=document.getElementById("backBtn");
let lookupType="phone";

function showNotif(msg,err=false){notif.textContent=msg;notif.className=err?"notification error":"notification";notif.style.display="block";setTimeout(()=>notif.style.display="none",3500);}
function showModal(el){el.style.display="flex";}
function closeModal(el){el.style.display="none";}
function sleep(ms){return new Promise(r=>setTimeout(r,ms));}
async function typeHTML(target,html,speed=12){for(let i=0;i<html.length;i++){target.innerHTML+=html[i];target.scrollTop=target.scrollHeight;await sleep(speed);} }

function coloredLines(obj){const map={mobile:"mobile",name:"name",fname:"fname",address:"address",circle:"circle",alt:"alt",id:"id",dev:"dev"};let lines=[];for(const k in obj){let v=obj[k];if(typeof v==="object")v=JSON.stringify(v);const cls=map[k]||"def";lines.push(`<span class="key-${cls}">"${k}"</span>: <span class="val-${cls}">"${v}"</span>\n`);}return lines;}

phoneBtn.onclick=()=>{lookupType="phone";phoneBtn.classList.add("active");vehicleBtn.classList.remove("active");};
vehicleBtn.onclick=()=>{lookupType="vehicle";vehicleBtn.classList.add("active");phoneBtn.classList.remove("active");vehicleFrame.src="https://vehicle-details-five.vercel.app";vehicleFrameContainer.style.display="block";document.getElementById("mainContainer").style.display="none";document.getElementById("terminal").style.display="none";};
backBtn.onclick=()=>{vehicleFrameContainer.style.display="none";document.getElementById("mainContainer").style.display="block";document.getElementById("terminal").style.display="block";};

document.getElementById("openSignup").onclick=()=>showModal(signupModal);
document.getElementById("openLogin").onclick=()=>showModal(loginModal);
document.getElementById("closeSignup").onclick=()=>closeModal(signupModal);
document.getElementById("closeLogin").onclick=()=>closeModal(loginModal);
document.getElementById("closeSub").onclick=()=>closeModal(subModal);

document.getElementById("sendSignup").onclick=async()=>{
 const u=document.getElementById("suUsername").value.trim();
 const p=document.getElementById("suPassword").value.trim();
 const t=document.getElementById("suTG").value.trim();
 if(!u||!p||!t)return showNotif("Fill all fields",true);
 try{
  const res=await fetch(`${API_BASE}/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:u,password:p,telegramId:t})});
  const j=await res.json();
  if(res.ok){showNotif("Request sent to admin.");closeModal(signupModal);}else showNotif(j.error||"Signup failed",true);
 }catch(e){showNotif("Network error",true);}
};

document.getElementById("doLogin").onclick=async()=>{
 const u=document.getElementById("liUsername").value.trim();
 const p=document.getElementById("liPassword").value.trim();
 if(!u||!p)return showNotif("Fill all fields",true);
 try{
  const res=await fetch(`${API_BASE}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:u,password:p})});
  const j=await res.json();
  if(res.ok){localStorage.setItem("loggedUser",u);localStorage.setItem("credits",j.credits||0);showNotif("Login success");closeModal(loginModal);}else showNotif(j.error||"Login failed",true);
 }catch(e){showNotif("Network error",true);}
};

document.getElementById("sendSubReq").onclick=async()=>{
 const u=localStorage.getItem("loggedUser");
 if(!u)return showNotif("Login first",true);
 try{
  const res=await fetch(`${API_BASE}/requestSubscription`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:u})});
  const j=await res.json();
  if(res.ok){showNotif("Subscription request sent");closeModal(subModal);}else showNotif(j.error||"Error",true);
 }catch(e){showNotif("Network error",true);}
};

lookupBtn.onclick=async()=>{
 const val=lookupInput.value.trim();
 if(!val)return showNotif("Enter number",true);
 if(lookupType!=="phone")return showNotif("Phone lookup only",true);
 const u=localStorage.getItem("loggedUser");
 if(!u)return showModal(loginModal);
 terminalText.innerHTML=`kali@osint:~$ osint --target ${val}\n`;
 await typeHTML(terminalText,"[+] Querying...\n",14);
 try{
  const res=await fetch(`${API_BASE}/search?username=${encodeURIComponent(u)}&number=${encodeURIComponent(val)}`);
  const j=await res.json();
  if(!res.ok){await typeHTML(terminalText,`[-] ${j.error||'Error'}\n`,14);if(j.error&&j.error.toLowerCase().includes("credit"))showModal(subModal);return;}
  await typeHTML(terminalText,"[âœ“] Formatting data...\n\n",12);
  const arr=Array.isArray(j.data)?j.data:[j.data];
  for(const entry of arr){for(const line of coloredLines(entry))await typeHTML(terminalText,line,8);await typeHTML(terminalText,"\n-----------------\n",10);}
  if(j.remaining!==undefined)localStorage.setItem("credits",j.remaining);
  showNotif("âœ… Search done");
 }catch(e){await typeHTML(terminalText,`[-] ${e.message}\n`,14);showNotif("Network error",true);}
};

window.addEventListener("load",()=>{
 const u=localStorage.getItem("loggedUser");
 if(u){terminalText.innerHTML=`kali@osint:~$ logged in as ${u}\n[â€¢] Ready...\n`;}
});
</script>
</body>
</html>